<navbar></navbar>
  <!-- Position Bar -->
  <nav class="navbar navbar-inverse snav" role="navigation">

    <ul class="addposition">
      <li>
        <form dnd-nodrag ng-submit="positionForm.create()">
          <input class="forms-control" type="text" name="name" ng-model="newPosition.name" required="required" placeholder="Add a new position" maxlength="30">
          <button type="submit" class="subchck btn submit down-button addPos" ><b>+</b></button>
        </form>
      <li>  
    </ul>

    <ul class="nav navbar-nav side-nav" dnd-list="positions" dnd-allowed-types="positions"> 
      <li ng-repeat="position in positions" dnd-draggable="position"
        dnd-moved="positions.splice($index, 1); positionSave()"
        dnd-effect-allowed="move"
        dnd-selected="models.selected = position"
        class="background-{{position.name}}"
        dnd-type="position" ng-click="getPosition(position)">
         <a href="" class="newpad fa fa-fw fa-arrows-v" ><span class="handle positionspan">::</span> <span dnd-nodrag id="posName" >{{ position.name}}</span> 
         <button ng-click="delete(position)" class="deletePos">✖</button></a>
      </li>
    </ul>
  </nav>

  <!-- TTYPE HEADDER -->
  <div class="ttype-head">
    <span>{{currentPositionName}}</span>
    <form ng-submit="techTypeForm.create()" class="create-ttype">
      <input class="forms-control-tech" type="text" name="name" ng-model="newTechType.name" ng-disabled="!techTypeInput" required="required" placeholder="Add a new technique type"  maxlength="32">
      <button type="submit" class="subchck btn submit down-button addTech" ><b>+</b></button>
    </form>
  </div>

  <!-- TECHNIQUE HEADER -->
  <div class="newtech-head">
    <a href="" ng-click="addVideo()" ng-init="imgsrc1='<%= image_path('video.png') %>'" 
    ng-mouseover="imgsrc1='<%= image_path('videoh.png') %>'" 
    ng-mouseout="imgsrc1='<%= image_path('video.png') %>'" >
    <img id="video" ng-src="{{imgsrc1}}" data-toggle="tooltip" data-placement="bottom"  title="Add a video">
    </a>
    <a href="" ng-click="addSteps()" ng-init="imgsrc2='<%= image_path('steps.png') %>'" 
    ng-mouseover="imgsrc2='<%= image_path('stepsh.png') %>'" 
    ng-mouseout="imgsrc2='<%= image_path('steps.png') %>'">
     <img id="steps" ng-src="{{imgsrc2}}" data-toggle="tooltip" data-placement="bottom" title="Add technique steps">
    </a>
    <a href="" ng-click="addNotes()" ng-init="imgsrc3='<%= image_path('notes.png') %>'" 
    ng-mouseover="imgsrc3='<%= image_path('notesh.png') %>'" 
    ng-mouseout="imgsrc3='<%= image_path('notes.png') %>'">
      <img id="notes" ng-src="{{imgsrc3}}" data-toggle="tooltip" data-placement="bottom" title="Add other technique notes">
    </a>
  </div>

  <!-- BACKGROUND -->
  <div class="bg-addposition-container" ng-hide="showTechTypes">
    <div ng-show="positionBg">
      <a ng-init="imgsrc4='<%= image_path('addPositon2.png') %>'">
        <img id="bg-addposition" ng-src="{{imgsrc4}}">
      </a>
    </div>
    <div ng-show="ttechBg">
      <a ng-init="imgsrc5='<%= image_path('addTechType2.png') %>'">
        <img id="bg-addposition" ng-src="{{imgsrc5}}">
      </a>
    </div>
  </div>

<!-- TECHNIQUE TYPE  COLUMN-->
<div class="ttype-capsule" ng-show="showTechTypes">
  <!-- TECHNIQUE CARDS -->
  <div ng-show="currentPosition" dnd-list="technique_types" dnd-allowed-types="technique_types" class="tnav">
    <div class="ttype-card-container" ng-repeat="technique_type in technique_types" dnd-draggable="technique_type" dnd-type="technique_type"
    dnd-moved="technique_types.splice($index, 1); ttypeSave()" dnd-effect-allowed="move" dnd-selected="models.selected = technique_type">
      <div class="ttype-card-header" >
        <button ng-click="deleteTechType(technique_type)" class="deleteTType">Delete</button>
        <p><span class="handle ttypespan"><b>::</b></span><span dnd-nodrag>{{ technique_type.name}}</span></p>
      </div>
      <ul class="nav" dnd-list="technique_type.techniques" dnd-allowed-types="technique_type.techniques">
        <li ng-repeat="technique in technique_type.techniques" dnd-draggable="technique" dnd-moved="technique_type.techniques.splice($index, 1); techniqueSave()" dnd-effect-allowed="move" dnd-selected="models.selected = technique" dnd-type="technique" class="tech-row">
          <a href="" ng-click="getTechnique(technique_type, technique)"><span class="handle techspan"><b>::</b></span><span dnd-nodrag> {{technique.name}}<button ng-click="deleteTech(technique_type, technique)" class="deleteTechRow">✖</button></span></a>
        </li>
        <li>
          <form ng-submit="techForm.create(technique_type)" class="add-tech-form">
            <input class="forms-control-tech" type="text" name="name" ng-model-options="{updateOn : 'change blur'}" ng-model="newTech.name" required="required" placeholder="Add a new technique"  maxlength="36">
            <button type="submit" class="subchck btn submit down-button addTech" ><b>+</b></button>
          </form>
        </li>
      </ul>
    </div>
  </div>
</div>

<!-- TECHNIQUE COLUMN-->  
<div class="technique-capsule" ng-show="showTechTypes">
  <!-- BACKGROUND -->
    <div ng-hide="techSelected">
      <a ng-init="imgsrc6='<%= image_path('addTech2.png') %>'">
        <img id="bg-addtech" ng-src="{{imgsrc6}}">
      </a>
    </div>
  <!-- DETAILS CARD CONTAINER -->
  <div class="details-card" ng-show="techSelected">
    <!-- HEADER -->
    <div class="right-card-header">
      <span>{{currentTechnique.name}}</span>
    </div>
    <!-- MESSAGE IF NO DETAILS -->
    <div ng-show="showMessage">
      <a ng-init="imgsrc7='<%= image_path('addTechDetails2.png') %>'">
        <img id="bg-showmessage" ng-src="{{imgsrc7}}">
      </a>
    </div>
    <!-- VIDEO -->
    <div ng-show="showVideo" class="videocard">
      <button class="deleteVideoBtn subchck btn submit down-button" ng-click="deleteVideo()" data-toggle="tooltip" data-placement="bottom" title="Delete Video">✖</button>
      <iframe ng-show="doVideosExist" width="640" height="360" class="video-thumb" ng-src="{{trustSrc(vidSRC)}}">
      </iframe>
      <form ng-show="!doVideosExist" ng-submit="videoForm.create()" class="add-video-form">
        <label>Add a video url: </label><input class="forms-control-video" type="text" name="name" ng-model-options="{updateOn : 'change blur'}" ng-model="newVideo" required="required" placeholder="e.g. https://www.youtube.com/watch?v=YaNLxS2-HEY">
        <button type="submit" class="subchck btn submit down-button addTech" ><b>+</b></button>
      </form>
      <button ng-show="doVideosExist" ng-click="editVideoBtn()" class="subchck btn submit down-button editVideo" >Edit video</button>
    </div>
    <!-- STEPS -->
    <div ng-show="showSteps">
      <div class="step-list-container">
        <div class="step-list-header">
          <p> Steps </p>
        </div>
        <ul class="nav">
          <li ng-repeat="step in steps" class="step-row">
            <a>{{$index +1}}. {{step.instruction}}<button ng-click="deleteStep(step)" class="deleteTechRow">✖</button></a>
          </li>
          <li>
            <form ng-submit="stepForm.create()" class="add-tech-form">
              <input class="forms-control-step" type="text" name="name" ng-model-options="{updateOn : 'change blur'}" ng-model="newStep" required="required" placeholder="Add a new step" >
              <button type="submit" class="subchck btn submit down-button addTech" maxlength="500" ><b>+</b></button>
            </form>
          </li>
        </ul>
      </div>
    </div>    
    <!-- OTHER NOTES -->
    <div ng-show="showNotes" class="notes-block">
      <button  class="deleteVideoBtn subchck btn submit down-button" data-toggle="tooltip" data-placement="bottom" title="Delete Notes" ng-click="deleteNotes()">✖</button>
      <form ng-submit="notesForm.create()">
        <textarea ng-readonly="doNotesExist" rows="8" type="text" ng-model="newNotes" required="required" placeholder="Add any other notes you might have" maxlength="1000"></textarea>
        <button ng-if="!doNotesExist" type="submit" class="subchck btn submit down-button addNotes" ><b>Add Notes</b></button>
      </form>
      <button ng-if="doNotesExist" ng-click="editNotesBtn()" class="subchck btn submit down-button editNotes" ><b>Edit Notes</b></button>
    </div>
  </div>
</div>
