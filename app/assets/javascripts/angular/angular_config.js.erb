var app = angular.module('jiujitsmi', ['ngRoute', 'ng-token-auth', 'dndLists', 'ui.bootstrap', 'ngAnimate', 'angularRipple', 'angular-scroll-animate', 'ngAside', 'ngResource']);

app.config(['$routeProvider', '$authProvider', '$locationProvider' function($routeProvider, $authProvider, $locationProvider) {
  $routeProvider.
    when('/', {
      templateUrl: "<%= asset_path('landing_page/index.html') %>",
      controller: 'LandingPageCtrl'
    }).
    when('/home', {
      templateUrl: "<%= asset_path('home_page/home.html') %>",
      controller: 'HomePageCtrl'
    }).
    when('/profile', {
      templateUrl: "<%= asset_path('profile_page/profile.html.erb') %>",
      controller: 'ProfilePageCtrl'
    }).
    when('/account/reset_password', {
      templateUrl: "<%= asset_path('reset_password_page/reset_password.html.erb') %>",
      controller: 'ResetPasswordPageCtrl'
    }).
    when('/account/update_password', {
      templateUrl: "<%= asset_path('reset_password_page/update_password.html.erb') %>",
      controller: 'UpdatePasswordPageCtrl'
    })

  $locationProvider.html5Mode(true);

// https://github.com/lynndylanhurley/ng-token-auth/blob/master/dist%2Fng-token-auth.js#L219
  $authProvider.configure({
      apiUrl:                  "<%= ENV['URL']%>",
      passwordResetSuccessUrl: "<%= ENV['URL']%>#/account/update_password",
  })

}]);